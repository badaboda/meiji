<html>
<head>
  <script>
    function debug(msg) {
      var l=document.getElementById('log');
      l.innerHTML=l.innerHTML+'<br/>'+msg
    }
    function xhrStreaming(url, callback) {
      var xhr=new XMLHttpRequest();
      xhr.open("GET", url, true);
      var lastSize;
      xhr.onreadystatechange = function() {
        var newTextReceived;
        if(xhr.readyState  > 2) {
           newTextReceived = xhr.responseText.substring(lastSize);
           lastSize = xhr.responseText.length;
           callback(newTextReceived);
        }
      }
      xhr.send(null);
    }
  </script>
</head>
<body>
   XHR Streaming in Even Faster Website, 8.2.4 XHRStreaming

   <div id='log'></div> 
   <script>
     xhrStreaming('/meiji/1', function(msg) { debug('callback: '+msg); });
   </script>
</body>
</html>
